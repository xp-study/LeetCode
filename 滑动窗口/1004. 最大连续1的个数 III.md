#### 1004. 最大连续1的个数 III

给定一个由若干 `0` 和 `1` 组成的数组 `A`，我们最多可以将 `K` 个值从 0 变成 1 。

返回仅包含 1 的最长（连续）子数组的长度。

**示例 1：**

```shell
输入：A = [1,1,1,0,0,0,1,1,1,1,0], K = 2
输出：6
解释： 
[1,1,1,0,0,1,1,1,1,1,1]
粗体数字从 0 翻转到 1，最长的子数组长度为 6。
```

**示例 2：**

```shell
输入：A = [0,0,1,1,0,0,1,1,1,0,1,1,0,0,0,1,1,1,1], K = 3
输出：10
解释：
[0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1]
粗体数字从 0 翻转到 1，最长的子数组长度为 10。
```

**提示：**

1. `1 <= A.length <= 20000`
2. `0 <= K <= A.length`
3. `A[i]` 为 `0` 或 `1` 

### 题解

- **重点：题意转换。把「最多可以把 K 个 0 变成 1，求仅包含 1 的最长子数组的长度」转换为 「找出一个最长的子数组，该子数组内最多允许有 K 个 0 」。**

经过上面的题意转换，我们可知本题是求最大连续子区间，可以使用**滑动窗口**方法。滑动窗口的限制条件是：窗口内最多有 K 个 0。

代码思路：

* 使用 left 和 right 两个指针，分别指向滑动窗口的左右边界。

* right **主动**右移：right 指针每次移动一步。当 A[right]为 0，说明滑动窗口内增加了一个 0；

* left 被动**右移：判断此时窗口内 0 的个数，如果超过了 K，则 left** 指针被迫右移，直至窗口内的 0 的个数小于等于 K 为止。

* 滑动窗口长度的最大值就是所求。

# 示例

以 `A= [1,1,1,0,0,0,1,1,1,1,0], K = 2` 为例，下面的动图演示了滑动窗口的两个指针的移动情况。

![1004.gif](http://gitlab.wsh-study.com/xp-study/LeeteCode/blob/master/滑动窗口/images/最大连续1的个数%20III/1.gif)

```java
class Solution {
    public int longestOnes(int[] nums, int k) {
        int n = nums.length;
        int zeros = 0;
        int left = 0;
        int right = 0;

        int ans = 0;
        while (right < n) {
            if (nums[right] == 0) {
                zeros++;
            }
            while (zeros > k) {
                if (nums[left++] == 0) {
                    zeros--;
                }
            }
            ans = Math.max(ans, right - left + 1);
            right++;
        }
        return ans;
    }
}
```

