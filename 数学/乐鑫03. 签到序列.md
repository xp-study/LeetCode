## 乐鑫03. 签到序列

在某活动现场打卡处，活动参与者需要 **按照到达顺序** 依次领取并在签到簿上填下自己的排队编号（排队编号从 `1` 开始），将签到簿上的排队编号依次首尾相连可以得到形如 `"123456789101112..."` 的 **签到序列** ，请返回 **签到序列** 中的第 `k` 位数字。

**示例 1：**

```
输入：k = 6
输出：6
解释：签到序列 "12345678910..."中的第 6 位数字是 6。
```

**示例 2：**

```
输入：k = 20
输出：1
解释：签到序列 "123456789101112131415..."中的第 20 位数字是 1。
```

**提示：**

- `1 <= k <= 231-1`

### 题解

我们用如下步骤解决本题：

1. 判断第 k 位数字对应的数是几位数
2. 假设是 n 位数，我们继续判断第 k 位数字对应的数是第几个 n 位数
3. 假设是 第 m 个 n 位数，我们判断第 kk 位数字对应的数是该数的第几位

```c++
class Solution {
    using ll = long long;
public:
    // 快速幂，求 a ^ b
    ll qpow(ll a, ll b) {
        ll result = 1;
        while (b!=0){
            if ((b & 1) == 1) {
                result = result * a;
            }
            a = a * a;
            b >>= 1;
        }
        return result;
    }

    int getKthNum(int k) {
        int n = 1;
        for ( ;n < 15; n++){
            ll curLen = (qpow(10, n) - qpow(10, n - 1)) * n;
            if (curLen >= k) {
                break;
            }
            k -= curLen;
        }

        // 已知 n 位数和 k，求第几个数的第几位
        // 这里加n-1是为了处理能被n整除的情况和不能被n整除的情况
        ll q = (k + n - 1) / n;
        ll b = (k + n - 1) % n;

        // 第q个数实际的值
        ll num = qpow(10, n - 1) + q - 1;

        string s = to_string(num);

        // 求第b位数的实际值
        int ans = s[b] - '0';
        return ans;
    }
};
```

